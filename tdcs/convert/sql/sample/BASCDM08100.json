{
    "sqlMap": {
        "@namespace": "BASCDM08100",
        "insert": [
            {
                "@id": "saveProdCdIf",
                "@parameterClass": "hmap",
                "#text": "INSERT INTO TBAS_ADD_PROD_CD_IF\n            (\n                OP_DT,\n                OP_TM,\n                SEQ,\n                PROD_ID,\n                PROD_NM,\n                SVC_PROD_CD,\n                PROD_ST,\n                MKTG_DT,\n                SCRB_STOP_DT,\n                WDRL_DT,\n                COMB_PROD_YN,\n                WIRE_CL,\n                BAS_FEE_AMT,  \t\t/* 20170314 \ucd94\uac00 \uceec\ub7fc */\n                SVC_CD,\t\t\t\t/* 20170314 \ucd94\uac00 \uceec\ub7fc */\n                SVC_DTL_CL_CD,  \t/* 20170314 \ucd94\uac00 \uceec\ub7fc */\n                SUP_PROD_BAS_CL_CD,\n                SUP_PROD_BAS_CL_NM,\n                PLM_PROD_TYP_CD,\n                PLM_PROD_TYP_NM,\n                PROD_BAS_CL_CD,\n                PROD_BAS_CL_NM,\n                PROD_DTL_CD,\n                PROD_DTL_NM,\n                APLY_YN,\n                EXIST,\n                INS_DTM,\n                MOD_DTM\n            )\n            VALUES\n            (\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDD'),      /* OP_DT */\n\t\t\t\t#OP_TM#, \t\t\t\t\t\t   /* OP_TM */\n\t\t\t\tNVL((SELECT MAX(SEQ)+1 FROM TBAS_ADD_PROD_CD_IF WHERE OP_DT = TO_CHAR(SYSDATE, 'YYYYMMDD')), 1), /* SEQ */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 3, 10)),   /* PROD_ID */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 13, 80)),  /* PROD_NM */\n\t\t\t\tDECODE(TRIM(SUBSTRB(#REC_STR#, 93, 1)),'4','5',TRIM(SUBSTRB(#REC_STR#, 93, 1))),   /* SVC_PROD_CD */\t\t\t\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 94, 5)),   /* PROD_ST */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 99, 8)),   /* MKTG_DT */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 107, 8)),  /* SCRB_STOP_DT */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 115, 8)),  /* WDRL_DT[LEAV_DT] */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 123, 1)),  /* COMB_PROD_YN */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 124, 1)),  /* WIRE_CL */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 125, 11)), /* BAS_FEE_AMT */\t\t\t/* 20170314 \ucd94\uac00 \uceec\ub7fc */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 136, 1)),  /* SVC_CD */\t\t\t        /* 20170314 \ucd94\uac00 \uceec\ub7fc */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 137, 2)),  /* SVC_DTL_CL_CD */\t\t\t/* 20170314 \ucd94\uac00 \uceec\ub7fc */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 139, 5)),  /* SUP_PROD_BAS_CL_CD */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 144, 40)), /* SUP_PROD_BAS_CL_NM */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 184, 1)),  /* PLM_PROD_TYP_CD */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 185, 40)), /* PLM_PROD_TYP_NM */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 225, 5)),  /* PROD_BAS_CL_CD */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 230, 40)), /* PROD_BAS_CL_NM */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 270, 12)), /* PROD_DTL_CD */\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 282, 40)), /* PROD_DTL_NM */\n\t\t\t\t'N',\n\t\t\t\t(\tSELECT \n\t\t\t\t\t\tCOUNT(SUPL_SVC_CD)\n\t\t\t\t\tFROM\n\t\t\t\t\t\tTBAS_SUPL_SVC_MGMT\n\t\t\t\t\tWHERE\n\t\t\t\t\t\tDEL_YN = 'N' \n\t\t\t\t\tAND\n\t\t\t\t\t\tSUPL_SVC_CD\t= TRIM(SUBSTRB(#REC_STR#, 3, 10))\n\t\t\t\t),\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS'),\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')\n            )"
            },
            {
                "@id": "saveEqpMdlIf",
                "@parameterClass": "hmap",
                "isNotEmpty": {
                    "@prepend": "AND",
                    "@property": "colorData",
                    "iterate": {
                        "@property": "colorData",
                        "@open": "(",
                        "@close": ")",
                        "@conjunction": ",",
                        "#text": "#colorData[]#"
                    },
                    "#text": "to_number(trim(substrb(#REC_STR#, 99, 2))) = (select count(*)\n\t\t\t\t                                                       from tbas_prod_color\n\t\t\t\t                                                      where prod_cd = a.prod_cd\n\t\t\t\t                                                        and color_cd in \n\t\t\t\t                                                          \n \n\t\t\t\t                                                        and del_yn = 'N')"
                },
                "#text": "INSERT INTO tbas_eqp_mdl_if\n            (\n                op_dt,\n                op_tm,\n                seq,\n                mfact_cd,\n                eqp_mdl_nm,\n                eqp_cl_cd,\n                eqp_mdl_cd,\n                link_color_cnt,\n                link_color_cd,\n                dstrb_eqp_yn,\n                mktg_dt,\n                end_dt,\n                aply_yn,\n                exist,\n                ins_dtm,\n                mod_dtm,\n                cdma_cl,\n                esim_eqp_yn,\n                dual_sim_eqp_yn\n            )\n            VALUES\n            (\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDD'),\n\t\t\t\t#OP_TM#,\n\t\t\t\tNVL((SELECT MAX(SEQ)+1 \n\t\t\t\t       FROM tbas_eqp_mdl_if \n\t\t\t\t      WHERE op_dt = TO_CHAR(SYSDATE, 'YYYYMMDD') \n\t\t\t\t        ), 1),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 3, 10)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 13, 80)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 93, 1)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 94, 5)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 99, 2)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 101, 20)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 121, 1)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 122, 8)),\n\t\t\t\tNVL(TRIM(SUBSTRB(#REC_STR#, 130, 8)),'99991231'),\n\t\t\t   (SELECT decode(count(*),0,'N','X') /* \uae30\uc874 \ub4f1\ub85d\ub418\uc5b4 \uc788\ub294 \ub370\uc774\ud130\uc640 \ube44\uad50\ud558\uc5ec \ubcc0\uacbd\uac74\uc774 \uc788\ub294\uacbd\uc6b0 N \uc5c6\ub294 \uacbd\uc6b0 X */\n\t\t\t\t  FROM tbas_prod_mgmt a,\n\t\t\t\t       tbas_deal_co_mgmt b\n\t\t\t\t WHERE a.mfact_id = b.deal_co_cd\n\t\t\t\t   AND b.del_yn = 'N'\n\t\t\t\t   AND TO_CHAR(SYSDATE, 'yyyymmddhh24miss') BETWEEN  b.EFF_STA_DTM and  b.EFF_END_DTM /* jyg 99991231 \uc218\uc815 20170417  */\n\t\t\t\t   AND prod_nm  = TRIM(SUBSTRB(#REC_STR#, 13, 80))\n\t\t\t\t   AND prod_cd  = TRIM(SUBSTRB(#REC_STR#, 94, 5))   \n\t\t\t\t   AND biz_cd   = TRIM(SUBSTRB(#REC_STR#, 3, 10))   \n\t\t\t\t   AND end_dt   = NVL(TRIM(SUBSTRB(#REC_STR#, 130, 8)),'99991231')\n\t\t\t\t   AND com_mthd = TRIM(SUBSTRB(#REC_STR#, 151, 1))\n\t\t\t\t   AND a.del_yn = 'N'    \n\t\t\t\t   \t\n\t\t\t\t  \t\t\t   \n\t\t\t\t ),\t\t\t\t\n\t\t\t\t(SELECT COUNT(prod_cd)\n\t\t\t\t   FROM tbas_prod_mgmt\n\t\t\t\t  WHERE del_yn = 'N' \n\t\t\t\t\tAND prod_cd\t= TRIM(SUBSTRB(#REC_STR#, 94, 5))),\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS'),\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS'),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 151, 1)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 154, 1)),\n\t\t\t\tDECODE(NVL(TRIM(SUBSTRB(#REC_STR#, 155, 2)),'01'),'01','N','02','N','Y')\n            )"
            },
            {
                "@id": "saveCommCdIf",
                "@parameterClass": "hmap",
                "#text": "INSERT INTO tbas_comm_cd_if\n            (\n                op_dt,\n                op_tm,\n                seq,\n                \n                cd_val,\n                cd_val_nm,\n                cd_id,\n                aply_yn,\n                exist,\n                \n                ins_dtm,\n                mod_dtm\n            )\n            VALUES\n            (\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDD'),\n\t\t\t\t#OP_TM#,\n\t\t\t\tNVL((SELECT MAX(SEQ)+1 FROM tbas_comm_cd_if WHERE op_dt = TO_CHAR(SYSDATE, 'YYYYMMDD') ), 1),\n\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 3, 10)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 13, 80)),\n\t\t\t\tTRIM(SUBSTRB(#REC_STR#, 93, 12)),\n\t\t\t\t'N',\n\t\t\t\t(\n\t\t\t\t\tSELECT \n\t\t\t\t\t\tCOUNT(*)\n\t\t\t\t\tFROM\n\t\t\t\t\t\ttbas_comm_cd_dtl\n\t\t\t\t\tWHERE\n\t\t\t\t\t\tdel_yn = 'N' \n\t\t\t\t\tAND\n\t\t\t\t\t\tcomm_cd_id = \n\t\t\t\t\t(\n\t\t\t\t\t\tSELECT \n\t\t\t\t\t\t\tcomm_cd_val_nm\n\t\t\t\t\t\tFROM\n\t\t\t\t\t\t\ttbas_comm_cd_dtl\n\t\t\t\t\t\tWHERE\n\t\t\t\t\t\t\tdel_yn = 'N' \n\t\t\t\t\t\tAND\n\t\t\t\t\t\t\tcomm_cd_val = TRIM(SUBSTRB(#REC_STR#, 93, 12))\n\t\t\t\t\t)\n\t\t\t\t\tAND\n\t\t\t\t\t\tcomm_cd_val = TRIM(SUBSTRB(#REC_STR#, 3, 10))\n\t\t\t\t),\n\t\t\t\t\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS'),\n\t\t\t\tTO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')\n            )"
            }
        ]
    }
}